(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{3524:(e,t,n)=>{Promise.resolve().then(n.bind(n,8540))},8540:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(5155),s=n(2115),i=n(2296),r=n(7239),l=n(9447),o=n(4616),d=n(3717),c=n(2525),g=n(4416);function m(){let[e,t]=(0,s.useState)([]),[n,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[p,j]=(0,s.useState)(""),[f,v]=(0,s.useState)(["Du lịch","Mua sắm"]),[N,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(""),S=e.filter(e=>!p||e.category===p);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Kế hoạch t\xe0i ch\xednh"}),(0,a.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200",children:[(0,a.jsx)(o.A,{size:16,className:"mr-2"})," Tạo kế hoạch"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Lọc theo danh mục:"}),(0,a.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"w-full max-w-xs p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"-- Tất cả --"}),f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:0===S.length?(0,a.jsx)("p",{className:"text-center text-gray-500 p-4",children:"Chưa c\xf3 kế hoạch n\xe0o"}):S.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm flex justify-between items-center hover:bg-gray-50 transition-colors duration-150",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Danh mục: ",e.category]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Thời hạn: ",e.months," th\xe1ng – ",(0,i.GP)(new Date(e.startDate),"dd/MM/yyyy")," đến"," ",(0,i.GP)(function(e,t,n){let a=(0,l.a)(e,void 0);if(isNaN(t))return(0,r.w)(e,NaN);if(!t)return a;let s=a.getDate(),i=(0,r.w)((null==n?void 0:n.in)||e,a.getTime());return(i.setMonth(a.getMonth()+t+1,0),s>=i.getDate())?i:(a.setFullYear(i.getFullYear(),i.getMonth(),s),a)}(new Date(e.startDate),e.months),"dd/MM/yyyy")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Tổng số tiền: ",e.total.toLocaleString("vi-VN")," đ"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Ng\xe0y đ\xf3ng h\xe0ng th\xe1ng: ",e.payDay," – mỗi th\xe1ng đ\xf3ng ",(e.total/e.months).toLocaleString("vi-VN")," đ"]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{x(e),m(!0)},className:"text-indigo-600 hover:text-indigo-800 transition-colors duration-200",title:"Sửa",children:(0,a.jsx)(d.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>y(e),className:"text-red-600 hover:text-red-800 transition-colors duration-200",title:"X\xf3a",children:(0,a.jsx)(c.A,{size:16})})]})]},e.id))}),n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-10 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative animate-in fade-in zoom-in-95 duration-200",children:[(0,a.jsx)("button",{onClick:()=>{m(!1),x(null)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(g.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:h?"Sửa kế hoạch":"Tạo kế hoạch mới"}),(0,a.jsx)(u,{categories:f,onAddCategory:()=>w(!0),initialData:h||void 0,onSave:n=>{h?t(e.map(e=>e.id===n.id?n:e)):t([...e,{...n,id:Date.now()}]),m(!1),x(null)},onCancel:()=>{m(!1),x(null)}})]})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-10 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 relative animate-in fade-in zoom-in-95 duration-200",children:[(0,a.jsx)("button",{onClick:()=>y(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(g.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"X\xe1c nhận x\xf3a"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:['Bạn c\xf3 chắc muốn x\xf3a kế hoạch "',b.name,'"?']}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)("button",{onClick:()=>{b&&(t(e.filter(e=>e.id!==b.id)),y(null))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200",children:"X\xe1c nhận"}),(0,a.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",children:"Hủy"})]})]})}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-10 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 relative animate-in fade-in zoom-in-95 duration-200",children:[(0,a.jsx)("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(g.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Th\xeam danh mục mới"}),(0,a.jsx)("input",{value:k,onChange:e=>C(e.target.value),placeholder:"Nhập t\xean danh mục",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 mb-4"}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)("button",{onClick:()=>{k&&!f.includes(k)&&(v([...f,k]),C(""),w(!1))},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200",children:"Th\xeam"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",children:"Hủy"})]})]})})]})}function u(e){let{initialData:t,onSave:n,onCancel:r,categories:l,onAddCategory:o}=e,[d,c]=(0,s.useState)((null==t?void 0:t.name)||""),[g,m]=(0,s.useState)((null==t?void 0:t.months.toString())||""),[u,h]=(0,s.useState)((null==t?void 0:t.total.toString())||""),[x,b]=(0,s.useState)((null==t?void 0:t.payDay.toString())||"1"),[y,p]=(0,s.useState)((null==t?void 0:t.category)||l[0]||""),[j,f]=(0,s.useState)(t?(0,i.GP)(new Date(t.startDate),"yyyy-MM-dd"):(0,i.GP)(new Date,"yyyy-MM-dd")),v=u&&g?Math.floor(parseInt(u)/parseInt(g)):0;return(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean kế hoạch"}),(0,a.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Nhập t\xean kế hoạch",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số th\xe1ng"}),(0,a.jsx)("input",{value:g,onChange:e=>m(e.target.value),type:"number",placeholder:"Nhập số th\xe1ng",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tổng số tiền cần"}),(0,a.jsx)("input",{value:u,onChange:e=>h(e.target.value),type:"number",placeholder:"Nhập tổng số tiền",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiền cần đ\xf3ng mỗi th\xe1ng"}),(0,a.jsx)("input",{disabled:!0,value:v.toLocaleString("vi-VN"),className:"w-full p-2 border border-gray-300 bg-gray-100 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y đ\xf3ng tiền h\xe0ng th\xe1ng"}),(0,a.jsx)("input",{value:x,onChange:e=>b(e.target.value),type:"number",min:1,max:31,placeholder:"Nhập ng\xe0y (1-31)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y bắt đầu"}),(0,a.jsx)("input",{value:j,onChange:e=>f(e.target.value),type:"date",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Danh mục"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{value:y,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",children:l.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("button",{onClick:o,className:"px-3 py-2 text-indigo-600 hover:text-indigo-800 transition-colors duration-200",children:"+ Th\xeam"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end mt-4",children:[(0,a.jsx)("button",{onClick:function(){if(!d||!g||!u||!x||!y)return alert("Điền đầy đủ th\xf4ng tin");n({id:(null==t?void 0:t.id)||Date.now(),name:d,months:parseInt(g),total:parseInt(u),payDay:parseInt(x),category:y,startDate:j})},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200",children:"Lưu"}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200",children:"Hủy"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[392,441,684,358],()=>t(3524)),_N_E=e.O()}]);